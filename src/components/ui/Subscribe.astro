---
import PrimaryButton from "@components/ui/PrimaryButton.astro";
import Section from "@layouts/Section.astro";
---

<Section>
  <article data-theme="dark">
    <header>
      <h2>Subscribe to Our Newsletter</h2>
      <p>Build stronger Customer Relationships with Consultalk</p>
    </header>
    <form>
      <input type="email" placeholder="Your mail address" data-theme="light" />
      <PrimaryButton url="#0" text="Subscribe" variant="accent" />
    </form>
  </article>
</Section>

<style>
  @layer components {
    article {
      display: flex;
      flex-wrap: wrap;
      gap: clamp(2rem, 7vw, 5rem);
      justify-content: space-between;
      padding: 3rem 1.5rem;
      border-radius: 10px;
      overflow: clip;
      position: relative;
      isolation: isolate;
      margin-block-end: clamp(2rem, 10vw, 8rem);
      form {
        display: flex;
        flex-wrap: wrap;
        flex: 1;
        place-items: center;
        gap: 2rem;

        input {
          flex: 1 1;
          max-width: 20rem;
          padding: 22px 155px 22px 33px;
          align-items: center;
          gap: 10px;
          border-radius: 4px;
          border: 1px solid #e3e3e3;
        }
      }
      &::before {
        --square-count: 12;
        --square-size: 1rem;

        --_square-size: var(--square-size, 1rem);
        --_square-half: calc(var(--square-size) / 2);
        --_square-sum: calc(var(--square-count) * var(--square-size));
        z-index: -1;
        content: "";
        position: absolute;
        right: 0;
        top: 0;
        transform-origin: 0 0;
        inline-size: calc(round(var(--_square-sum), var(--_square-size)) - var(--_square-half));
        aspect-ratio: 0.7;
        background: linear-gradient(135deg, #be965d, #976f40, #c99b61, #f0be7b, #ffcb85, #eebc79, #c0935b, #976f40) 0 0 / 100% 100%;
        mask:
          var(--square-pattern) 0 0 / var(--_square-size) var(--_square-size),
          var(--square-pattern) var(--_square-half) var(--_square-half) / var(--_square-size) var(--_square-size);
        /*clip-path: polygon(-3% 0%, 100% 0%, 100% 103%);*/
        rotate: -45deg;
      }
      &::after {
        content: "";
        height: 100%;
        width: 50%;
        border-radius: inherit;
        background: #4eaf4e;
        position: absolute;
        top: 50%;
        bottom: 0;
        right: 2rem;
        rotate: -45deg;
        transform-origin: right top;
      }
    }
  }
</style>
